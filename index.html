<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<title>Multiplayer Car Game</title>
<style>
  body {
    margin: 0;
    overflow: hidden;
    background: #f5f7fb;
    font-family: Arial, Helvetica, sans-serif;
  }

  canvas {
    display: block;
    background: linear-gradient(#eef2ff, #dbeafe);
  }

  /* FPS */
  #fps {
    position: fixed;
    top: 10px;
    left: 10px
    background: rgba(0,0,0,0.6);
    color: #00ffcc;
    padding: 6px 10px;
    border-radius: 6px;
    font-size: 14px;
  }

  /* CHAT */
  #chat {
    position: fixed;
    right: 15px;
    bottom: 15px;
    width: 280px;
    height: 220px;
    background: rgba(255,255,255,0.95);
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  #messages {
    flex: 1;
    padding: 10px;
    overflow-y: auto;
    font-size: 13px;
  }

  #messages div {
    margin-bottom: 4px;
  }

  #chat input {
    border: none;
    border-top: 1px solid #ddd;
    padding: 10px;
    font-size: 14px;
    outline: none;
  }

  .system {
    color: #22c55e;
    font-style: italic;
  }
</style>
</head>
<body>

<div id="fps">FPS: 0</div>

<div id="chat">
  <div id="messages"></div>
  <input id="chatInput" placeholder="Mesaj yaz..." />
</div>

<canvas id="game"></canvas>

<script>
/* ===== NICK ===== */
const username = prompt("Nick seÃ§:", "Player" + Math.floor(Math.random()*1000)) || "Player";

/* ===== CHAT ===== */
const messages = document.getElementById("messages");
const chatInput = document.getElementById("chatInput");

function addMessage(text, cls="") {
  const div = document.createElement("div");
  div.textContent = text;
  if (cls) div.className = cls;
  messages.appendChild(div);
  messages.scrollTop = messages.scrollHeight;
}

addMessage(`ðŸŸ¢ ${username} oyuna katÄ±ldÄ±`, "system");

chatInput.addEventListener("keydown", e => {
  if (e.key === "Enter" && chatInput.value.trim()) {
    addMessage(username + ": " + chatInput.value);
    chatInput.value = "";
  }
});

/* ===== CANVAS ===== */
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

function resize() {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

/* ===== PLAYER ===== */
const player = {
  x: canvas.width / 2,
  y: canvas.height / 2,
  speed: 4
};

const keys = {};
window.addEventListener("keydown", e => keys[e.key.toLowerCase()] = true);
window.addEventListener("keyup", e => keys[e.key.toLowerCase()] = false);

/* ===== FPS ===== */
let last = performance.now();
let frames = 0;
let fps = 0;

/* ===== GAME LOOP ===== */
function loop(now) {
  frames++;
  if (now - last >= 1000) {
    fps = frames;
    frames = 0;
    last = now;
    document.getElementById("fps").textContent = "FPS: " + fps;
  }

  update();
  draw();
  requestAnimationFrame(loop);
}

function update() {
  if (keys["w"] || keys["arrowup"]) player.y -= player.speed;
  if (keys["s"] || keys["arrowdown"]) player.y += player.speed;
  if (keys["a"] || keys["arrowleft"]) player.x -= player.speed;
  if (keys["d"] || keys["arrowright"]) player.x += player.speed;
}

/* ===== DRAW (2.5D) ===== */
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // zemin grid
  ctx.strokeStyle = "rgba(0,0,0,0.05)";
  for (let i=0;i<canvas.width;i+=60){
    ctx.beginPath();
    ctx.moveTo(i,0);
    ctx.lineTo(i,canvas.height);
    ctx.stroke();
  }
  for (let i=0;i<canvas.height;i+=60){
    ctx.beginPath();
    ctx.moveTo(0,i);
    ctx.lineTo(canvas.width,i);
    ctx.stroke();
  }

  // perspektif (yukarÄ± Ã§Ä±kÄ±nca kÃ¼Ã§Ã¼lÃ¼r)
  const scale = 1 - (player.y / canvas.height) * 0.3;

  ctx.save();
  ctx.translate(player.x, player.y);
  ctx.scale(scale, scale);

  // gÃ¶lge
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.beginPath();
  ctx.ellipse(0, 12, 22, 8, 0, 0, Math.PI*2);
  ctx.fill();

  // araba
  ctx.fillStyle = "#ff4655"; // Valorant kÄ±rmÄ±zÄ±sÄ± ðŸ˜
  ctx.fillRect(-20, -10, 40, 20);

// oyuncu ismi
ctx.fillStyle = "#111";
ctx.font = "12px Arial";
ctx.textAlign = "center";
ctx.fillText(username, 0, -18);


  ctx.restore();
}

requestAnimationFrame(loop);

/* ===== Ã‡IKIÅž ===== */
window.addEventListener("beforeunload", () => {
  addMessage(`ðŸ”´ ${username} oyundan ayrÄ±ldÄ±`);
});
</script>
</body>
</html>


